{
  "id": "833700a8-79e7-4cb0-9ab4-7a8fdb511efc",
  "prevId": "a099da41-0156-4433-9b39-679e142dad0e",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.app_announcements": {
      "name": "app_announcements",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "platform": {
          "name": "platform",
          "type": "app_platform[]",
          "primaryKey": false,
          "notNull": true
        },
        "user_kind": {
          "name": "user_kind",
          "type": "user_kind[]",
          "primaryKey": false,
          "notNull": true
        },
        "title_de": {
          "name": "title_de",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title_en": {
          "name": "title_en",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description_de": {
          "name": "description_de",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description_en": {
          "name": "description_en",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "start_date_time": {
          "name": "start_date_time",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "end_date_time": {
          "name": "end_date_time",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.food_users": {
      "name": "food_users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.meal_days": {
      "name": "meal_days",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "meal_id": {
          "name": "meal_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "date": {
          "name": "date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "price_guest": {
          "name": "price_guest",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "price_student": {
          "name": "price_student",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "price_employee": {
          "name": "price_employee",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "unique_meal_date": {
          "name": "unique_meal_date",
          "columns": [
            {
              "expression": "meal_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "meal_days_meal_id_meals_id_fk": {
          "name": "meal_days_meal_id_meals_id_fk",
          "tableFrom": "meal_days",
          "tableTo": "meals",
          "columnsFrom": [
            "meal_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.meal_nutrition": {
      "name": "meal_nutrition",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "meal_id": {
          "name": "meal_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "nutrition_kj": {
          "name": "nutrition_kj",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "nutrition_kcal": {
          "name": "nutrition_kcal",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "nutrition_fat": {
          "name": "nutrition_fat",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "nutrition_fat_saturated": {
          "name": "nutrition_fat_saturated",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "nutrition_carbs": {
          "name": "nutrition_carbs",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "nutrition_sugar": {
          "name": "nutrition_sugar",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "nutrition_fiber": {
          "name": "nutrition_fiber",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "nutrition_protein": {
          "name": "nutrition_protein",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "nutrition_salt": {
          "name": "nutrition_salt",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "meal_nutrition_meal_id_meals_id_fk": {
          "name": "meal_nutrition_meal_id_meals_id_fk",
          "tableFrom": "meal_nutrition",
          "tableTo": "meals",
          "columnsFrom": [
            "meal_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "meal_nutrition_meal_id_unique": {
          "name": "meal_nutrition_meal_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "meal_id"
          ]
        }
      },
      "checkConstraints": {}
    },
    "public.meal_problem_reports": {
      "name": "meal_problem_reports",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "meal_day_id": {
          "name": "meal_day_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "user_id": {
          "name": "user_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "reason": {
          "name": "reason",
          "type": "meal_report_reason",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "meal_problem_reports_meal_day_id_meal_days_id_fk": {
          "name": "meal_problem_reports_meal_day_id_meal_days_id_fk",
          "tableFrom": "meal_problem_reports",
          "tableTo": "meal_days",
          "columnsFrom": [
            "meal_day_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "meal_problem_reports_user_id_food_users_id_fk": {
          "name": "meal_problem_reports_user_id_food_users_id_fk",
          "tableFrom": "meal_problem_reports",
          "tableTo": "food_users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.meal_reviews": {
      "name": "meal_reviews",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "meal_id": {
          "name": "meal_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "user_id": {
          "name": "user_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "rating": {
          "name": "rating",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "meal_reviews_meal_id_meals_id_fk": {
          "name": "meal_reviews_meal_id_meals_id_fk",
          "tableFrom": "meal_reviews",
          "tableTo": "meals",
          "columnsFrom": [
            "meal_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "meal_reviews_user_id_food_users_id_fk": {
          "name": "meal_reviews_user_id_food_users_id_fk",
          "tableFrom": "meal_reviews",
          "tableTo": "food_users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.meal_variants": {
      "name": "meal_variants",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "base_meal_id": {
          "name": "base_meal_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "name_de": {
          "name": "name_de",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name_en": {
          "name": "name_en",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "allergens": {
          "name": "allergens",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "flags": {
          "name": "flags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "original_language": {
          "name": "original_language",
          "type": "language_code",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "additional": {
          "name": "additional",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "static": {
          "name": "static",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "price_guest": {
          "name": "price_guest",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "price_student": {
          "name": "price_student",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "price_employee": {
          "name": "price_employee",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "unique_base_meal_name_de": {
          "name": "unique_base_meal_name_de",
          "columns": [
            {
              "expression": "base_meal_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name_de",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "meal_variants_base_meal_id_meals_id_fk": {
          "name": "meal_variants_base_meal_id_meals_id_fk",
          "tableFrom": "meal_variants",
          "tableTo": "meals",
          "columnsFrom": [
            "base_meal_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.meals": {
      "name": "meals",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name_de": {
          "name": "name_de",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name_en": {
          "name": "name_en",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "category": {
          "name": "category",
          "type": "meal_category",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "restaurant": {
          "name": "restaurant",
          "type": "restaurant",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "allergens": {
          "name": "allergens",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "flags": {
          "name": "flags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "original_language": {
          "name": "original_language",
          "type": "language_code",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "static": {
          "name": "static",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "unique_name_category_restaurant": {
          "name": "unique_name_category_restaurant",
          "columns": [
            {
              "expression": "name_de",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "category",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "restaurant",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.room_reports": {
      "name": "room_reports",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "room": {
          "name": "room",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "room_report_reason",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.university_sports": {
      "name": "university_sports",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "title_de": {
          "name": "title_de",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description_de": {
          "name": "description_de",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "title_en": {
          "name": "title_en",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description_en": {
          "name": "description_en",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "campus": {
          "name": "campus",
          "type": "campus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "location": {
          "name": "location",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "weekday": {
          "name": "weekday",
          "type": "weekday",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "start_time": {
          "name": "start_time",
          "type": "time",
          "primaryKey": false,
          "notNull": true
        },
        "end_time": {
          "name": "end_time",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "requires_registration": {
          "name": "requires_registration",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "invitation_link": {
          "name": "invitation_link",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "e_mail": {
          "name": "e_mail",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sports_category": {
          "name": "sports_category",
          "type": "sports_category",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "enums": {
    "public.app_platform": {
      "name": "app_platform",
      "schema": "public",
      "values": [
        "ANDROID",
        "IOS",
        "WEB",
        "WEB_DEV"
      ]
    },
    "public.user_kind": {
      "name": "user_kind",
      "schema": "public",
      "values": [
        "STUDENT",
        "EMPLOYEE",
        "GUEST"
      ]
    },
    "public.language_code": {
      "name": "language_code",
      "schema": "public",
      "values": [
        "DE",
        "EN"
      ]
    },
    "public.meal_category": {
      "name": "meal_category",
      "schema": "public",
      "values": [
        "MAIN",
        "SIDE",
        "SOUP",
        "SALAD",
        "DESSERT"
      ]
    },
    "public.meal_report_reason": {
      "name": "meal_report_reason",
      "schema": "public",
      "values": [
        "WRONG_PRICE",
        "WRONG_INGREDIENTS",
        "NOT_AVAILABLE",
        "OTHER"
      ]
    },
    "public.restaurant": {
      "name": "restaurant",
      "schema": "public",
      "values": [
        "INGOLSTADT_MENSA",
        "NEUBURG_MENSA",
        "REIMANNS",
        "CANISIUS"
      ]
    },
    "public.room_report_reason": {
      "name": "room_report_reason",
      "schema": "public",
      "values": [
        "WRONG_DESCRIPTION",
        "WRONG_LOCATION",
        "NOT_EXISTING",
        "MISSING",
        "OTHER"
      ]
    },
    "public.campus": {
      "name": "campus",
      "schema": "public",
      "values": [
        "Ingolstadt",
        "Neuburg"
      ]
    },
    "public.sports_category": {
      "name": "sports_category",
      "schema": "public",
      "values": [
        "Basketball",
        "Soccer",
        "Calisthenics",
        "Dancing",
        "StrengthTraining",
        "Running",
        "Jogging",
        "Handball",
        "Frisbee",
        "Volleyball",
        "Spikeball",
        "FullBodyWorkout",
        "Defense",
        "Yoga",
        "Meditation",
        "Tennis",
        "Badminton",
        "Swimming",
        "Waterpolo",
        "Cycling",
        "Climbing",
        "Boxing",
        "Kickboxing",
        "MartialArts",
        "TableTennis",
        "Rowing",
        "Baseball",
        "Skateboarding",
        "Parkour",
        "Hockey",
        "Hiking",
        "Other"
      ]
    },
    "public.weekday": {
      "name": "weekday",
      "schema": "public",
      "values": [
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday",
        "Sunday"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "views": {
    "public.future_meals": {
      "columns": {
        "mealId": {
          "name": "mealId",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "category": {
          "name": "category",
          "type": "meal_category",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "restaurant": {
          "name": "restaurant",
          "type": "restaurant",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "allergens": {
          "name": "allergens",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "flags": {
          "name": "flags",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "originalLanguage": {
          "name": "originalLanguage",
          "type": "language_code",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "static": {
          "name": "static",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "mealDate": {
          "name": "mealDate",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "prices": {
          "name": "prices",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "nutrition": {
          "name": "nutrition",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "variants": {
          "name": "variants",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        }
      },
      "definition": "\n   SELECT m.id                                                                                                AS \"mealId\",\n       d.id                                                                                                AS \"id\",\n       json_build_object('de', m.name_de, 'en', m.name_en)                                                 AS name,\n       m.category,\n       m.restaurant,\n       m.allergens,\n       m.flags,\n       m.original_language                                                                                 AS \"originalLanguage\",\n       m.static,\n       m.updated_at                                                                                        AS \"updatedAt\",\n       d.date                                                                                              AS \"mealDate\",\n       json_build_object('guest', d.price_guest, 'student', d.price_student, 'employee', d.price_employee) AS prices,\n       CASE\n           WHEN n.nutrition_kj IS NOT NULL OR n.nutrition_kcal IS NOT NULL OR n.nutrition_fat IS NOT NULL\n               OR n.nutrition_fat_saturated IS NOT NULL OR n.nutrition_carbs IS NOT NULL OR n.nutrition_sugar IS NOT NULL\n               OR n.nutrition_fiber IS NOT NULL OR n.nutrition_protein IS NOT NULL OR n.nutrition_salt IS NOT NULL\n           THEN json_build_object('kj', n.nutrition_kj, 'kcal', n.nutrition_kcal, 'fat', n.nutrition_fat, 'fatSaturated',\n                                  n.nutrition_fat_saturated, 'carbs', n.nutrition_carbs, 'sugar', n.nutrition_sugar,\n                                  'fiber', n.nutrition_fiber, 'protein', n.nutrition_protein, 'salt', n.nutrition_salt)\n           ELSE NULL\n       END                                                                                                AS nutrition,\n       CASE\n           WHEN COUNT(v.id) > 0\n           THEN json_agg(json_build_object('id', v.id, 'name', json_build_object('de', v.name_de, 'en', v.name_en),\n                                           'allergens', v.allergens, 'flags', v.flags,\n                                           'originalLanguage', v.original_language, 'additional', v.additional,\n                                           'prices', json_build_object('guest', v.price_guest, 'student', v.price_student,\n                                                                       'employee', v.price_employee)))\n           ELSE NULL\n       END                                                                                                AS variants,\n       COALESCE(avg(r.rating), 0::numeric)                                                                 AS \"averageRating\",\n       count(r.rating)                                                                                     AS \"ratingCount\"\nFROM meals m\n         LEFT JOIN meal_nutrition n ON m.id = n.meal_id\n         LEFT JOIN meal_variants v ON m.id = v.base_meal_id\n         LEFT JOIN meal_reviews r ON m.id = r.meal_id\n         JOIN meal_days d ON m.id = d.meal_id\nWHERE d.date >= CURRENT_DATE\nGROUP BY m.id, d.id, m.category, m.restaurant, m.allergens, m.flags, m.original_language, m.static, m.updated_at,\n         d.date, d.price_guest, d.price_student, d.price_employee, n.nutrition_kj, n.nutrition_kcal, n.nutrition_fat,\n         n.nutrition_fat_saturated, n.nutrition_carbs, n.nutrition_sugar, n.nutrition_fiber, n.nutrition_protein,\n         n.nutrition_salt\nHAVING (n.nutrition_kj IS NOT NULL OR n.nutrition_kcal IS NOT NULL OR n.nutrition_fat IS NOT NULL\n        OR n.nutrition_fat_saturated IS NOT NULL OR n.nutrition_carbs IS NOT NULL OR n.nutrition_sugar IS NOT NULL\n        OR n.nutrition_fiber IS NOT NULL OR n.nutrition_protein IS NOT NULL OR n.nutrition_salt IS NOT NULL)\n   OR COUNT(v.id) > 0\n\n  ",
      "name": "future_meals",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    }
  },
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}